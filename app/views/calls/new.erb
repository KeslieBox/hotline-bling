<h1> Add a New Call to the Dispatch Log </h1>

<div class="flash"> 
    <%@errors && @errors.each do |m|%>
      <li><%=m%></li>
    <%end%> 
</div>

<div class="form">
    <%= form_for @call do |f| %>
    <%# try to turn this into url_helper%>
        <%= f.hidden_field :caller_id, value: @call.caller_id%>
        <%= f.hidden_field :dispatcher_id, value: @call.dispatcher_id%>
        <%= f.label :date %><br>
        <%= f.date_field :date %><br><br>

        <%= f.label "Select existing caller from the dropdown or add a new one below"%><br>
        
        <%= f.collection_select :caller_id, @callers, :id, :to_s, include_blank: 'None' %><br><br>
           
        <%= f.fields_for :caller, @caller do |c| %>
            <%= c.label "Caller Info" %><br>
            <%= c.label :first_name %>
            <%= c.text_field :first_name %>
 
            <%= c.label :last_name %>
            <%= c.text_field :last_name %><br>
 
            <%= c.label :address %>
            <%= c.text_field :address %>
 
            <%= c.label :city %>
            <%= c.text_field :city %><br>
 
            <%= c.label :state %>
            <%= c.text_field :state %>
 
            <%= c.label :zipcode %>
            <%= c.text_field :zipcode %><br>
 
            <%= c.label :phone_number %>
            <%= c.text_field :phone_number %><br><br>
        <% end %>

        <%= f.label "Log call details here:" %><br>
        <%= f.text_area :dispatch_log %><br><br>

        <%= f.label "Select your dispatcher username from dropdown"%><br>
        <%= f.collection_select :dispatcher_id, @dispatchers, :id, :username, include_blank: 'None' %><br><br>        

    <%= f.submit "Add Call"%>

    <% end %>
</div>